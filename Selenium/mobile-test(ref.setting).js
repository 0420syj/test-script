const {Builder, Key, By, Capabilities} = require('selenium-webdriver');
const chrome = require('selenium-webdriver/chrome');

const 상세 = async(driver, id) =>{
    await driver.get(`https://mprod.uplus.co.kr/mobile/accessory/category/product-view?urcAcceProdNo=${id}`);
    await driver.sleep(10);
    const list =  await driver.findElements(By.css(".top-img-area img"));

    for(let data of list) {
     let width = await data.getAttribute("width");
     //console.log(width);
     if(width < 100) {console.log(id +" " + data.width); break;}
    }

    if(!list.length)
    console.log(id +" 이미지 없음");

   // await driver.findElements(By.className("button"))[0].click();
}


(async function example() {
    const chromeCapabilities = Capabilities.chrome();
    let chromeOptions = new chrome.Options();
    chromeOptions.options_["debuggerAddress"] = "127.0.0.1:9222";
    chromeCapabilities.set('chromeOptions', {args: ['--headless']});
    let driver = new Builder().forBrowser('chrome').withCapabilities(chromeCapabilities).setChromeOptions(chromeOptions).build();

    try {
        // 네이버 실행
        let ids = "1001002213,1001002218,1001002216,1001002206,1001002205,1001002210,1001002208,1001002209,1001002212,1001002211,1001002207,1001002217,1001002215,1001002214,1001002434,1001002433,1001002072,1001002330,1001002234,1001002257,1001002259,1001002260,1001002258,1001002236,1001001954,1001002256,1001002255,1001002254,1001002240,1001002247,1001002246,1001002245,1001002251,1001002250,1001002249,1001002248,1001002244,1001002243,1001002242,1001002344,1001002253,1001002252,1001002239,1001002238,1001002237,1001002241,1001002235,1001002432,1001002329,1001002009,1002000010,1002000022,1002000023,1002000024,1002000018,1002000014,1002000019,1002000020,1002000021,1002000015,1002000016,1001001014,1001001712,1001001080,1001002073,1001002111,1001002074,1001001552,1001000208,1001001520,1001001431,1001001434,1001001430,1001000522,1001000532,1001001647,1001000520,1001000533,1001000521,1001001657,1001001659,1001001658,1001001525,1001000070,1001001556,1001001684,1001001261,1001001522,1001001078,1001002202,1001000400,1001002326,1001000231,1001001636,1001002325,1001001420,1001001635,1001000128,1001001962,1001000247,1001000172,1001002412,1001002321,1001001072,1001001011,1001002334,1001002338,1001001257,1001002413,1001002009,1001002455,1001002453,1001001429,1001002319,1001002360,1001001777,1001002295,1001002289,1001002294,1001002288,1001001788,1001002230,1001002228,1001002233,1001002268,1001001795,1001002221,1001000988,1001002276,1001002219,1001002222,1001002320,1001002284,1001002322,1001002264,1001002265,1001000990,1001002261,1001001782,1001001794,1001002263,1001002292,1001002274,1001001239,1001002297,1001002285,1001002223,1001002283,1001002267,1001002224,1001002307,1001002299,1001002332,1001002229,1001002275,1001002293,1001002273,1001002272,1001002290,1001002304,1001002302,1001002291,1001002280,1001002279,1001002278,1001002277,1001002271,1001002270,1001002227,1001002226,1001002225,1001002306,1001002305,1001002266,1001002231,1001002282,1001002262,1001002232,1001002456,1001002451,1001002286,1001002335,1001002296,1001002281,1001002303,1001002298,1001002452,1001002331,1001002301,1001002300,1001002287,1001001526,1001001227,1001001446,1001002323,1001002324,1001001229,1001001661,1001002055,1001001427,1001002346,1001002178,1001001779,1001001560,1001001957,1001001565,1001001564,1001002185,1001002093,1001001154,1001002157,1001002193,1001002161,1001002180,1001001695,1001001173,1001000965,1001002184,1001002195,1001001946,1001002353,1001002196,1001002404,1001002158,1001002194,1001002116,1001002138,1001002159,1001002181,1001002370,1001002028,1001002013,1001001767,1001001156,1001001467,1001001765,1001002369,1001002129,1001002172,1001002091,1001001407,1001002416,1001001309,1001002366,1001001485,1001000529,1001002089,1001002153,1001002415,1001002087,1001001464,1001001465,1001002330,1001002191,1001002187,1001001466,1001002423,1001001694,1001002358,1001002014,1001002182,1001002405,1001002147,1001001408,1001001468,1001002357,1001002356,1001001175,1001001406,1001002025,1001001912,1001001077,1001002409,1001002406,1001002402,1001002016,1001001763,1001000909,1001002152,1001002420,1001002160,1001002192,1001002364,1001002123,1001002124,1001002352,1001002417,1001002177,1001002174,1001001176,1001001036,1001002136,1001001074,1001001405,1001002403,1001001666,1001002090,1001001918,1001002131,1001002104,1001002020,1001002019,1001002023,1001002022,1001002155,1001002106,1001002348,1001001776,1001002088,1001001890,1001001307,1001001954,1001002086,1001002341,1001002015,1001002085,1001002169,1001002173,1001002170,1001000971,1001000970,1001001158,1001001157,1001001486,1001001174,1001001171,1001001170,1001001169,1001001035,1001001034,1001002115,1001002114,1001000660,1001002137,1001002135,1001002422,1001002421,1001002033,1001002032,1001002031,1001002030,1001002029,1001002027,1001002026,1001002130,1001002121,1001001091,1001001076,1001002408,1001002407,1001002401,1001002150,1001002149,1001002148,1001002183,1001002117,1001001463,1001002418,1001002190,1001002018,1001002017,1001001920,1001002122,1001002118,1001001039,1001001037,1001002142,1001002141,1001002140,1001002139,1001002188,1001002179,1001000659,1001000656,1001000655,1001000904,1001002449,1001002410,1001002146,1001002145,1001002144,1001002143,1001002419,1001002021,1001001462,1001001021,1001002462,1001002457,1001002354,1001002349,1001002440,1001002439,1001002437,1001002156,1001002154,1001002189,1001001213,1001001212,1001002012,1001002011,1001002010,1001002444,1001002460,1001002442,1001002438,1001002391,1001002390,1001002381,1001002380,1001002368,1001002441,1001002024,1001002467,1001002461,1001002119,1001002385,1001002373,1001002362,1001002329,1001001125,1001002445,1001002468,1001002450,1001002387,1001002377,1001002365,1001001948,1001002392,1001002382,1001001778,1001002459,1001002458,1001002151,1001002376,1001002443,1001001886,1001001885,1001002389,1001002388,1001002379,1001002378,1001002374,1001002168,1001002167,1001002166,1001002165,1001001146,1001001139,1001001138,1001001136,1001001135,1001001134,1001002447,1001002386,1001002375,1001002363,1001002446,1001002084,1001001311,1001002347,1001001906,1001002176,1001002175,1001002469,1001002470,1001002171,1001001663,1001001770,1001001066,1001001155,1001001164,1001002120,1001002162,1001002361,1001002400,1001001933,1001002393,1001002394,1001001930,1001002164,1001001692,1001001469,1001002397,1001001045,1001002429,1001002399,1001002186,1001001773,1001001487,1001002133,1001002128,1001002339,1001002126,1001001052,1001001470,1001002134,1001002342,1001002201,1001001067,1001002034,1001002132,1001002125,1001002398,1001002105,1001001989,1001002371,1001002372,1001001691,1001002425,1001002037,1001001065,1001001932,1001002199,1001002340,1001001062,1001001060,1001001051,1001002396,1001002395,1001002036,1001002426,1001002343,1001002163,1001002383,1001001667,1001001163,1001002127,1001001049,1001002430,1001002039,1001002038,1001001935,1001001934,1001001064,1001002411,1001001672,1001002424,1001002035,1001002107,1001002431,1001002428,1001002200,1001002045,1001002044,1001002043,1001002436,1001001967,1001001044,1001001043,1001002359,1001002355,1001002350,1001002427,1001002108,1001002463,1001001041,1001002465,1001002435,1001002466,1001002384,1001002448,1001001224,1001001419,1001001426,1001002414,1001001425,1001002000,1001001241,1001000277,1001002336,1001002337,1001001952,1001000031,1001001448,1001001423,1001002327,1001000259,1001002317,1001000257,1001000263,1001000252,1001002314,1001002316,1001000258,1001002315,1001002318,1001001236,1001002309,1001002328,1001002310,1001001331,1001001540,1001002313,1001002312,1001002311,1001000151,1001002308,1001002333,1001002454,1001001107,1001002072,1001001267,1001001421,1001001109,1001001103,1001001116,1001001264,1001002079,1001001281,1001001572,1001001688,1001002077,1001001114,1001001616,1001001209,1001001208,1001001102,1001002051,1001001286,1001002054,1001001447,1001001262,1001001699,1001001298,1001001461,1001001557,1001001530,1001001428,1001001527,1001001279,1001001533,1001000954,1003000002,1003000004,1003000003"
        let idx = 1
        for(let id of ids.split(",")) {
            console.log(idx++ + " : " + id)
            await 상세(driver, id);
        }
            
    }
    finally{
       await driver.quit();
    }
})();
